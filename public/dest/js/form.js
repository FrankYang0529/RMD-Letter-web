function selectType(t,e){var i="#"+t,l=t,n=l+"-answer",a=Math.random().toString(36).substr(2,5),o="optid"+a,r=l+"-last",s={single:"單選",multiple:"多選",text:"簡答",textArea:"詳答",file:"檔案上傳"},p={single:'<div id="'+l+'" class="question-pannel single-choice">\t\t    \t\t<span onclick="removeQuestion(\''+l+'\');" class="w3-bar-item w3-button w3-white w3-hover-opacity w3-hover-black w3-border w3-xlarge w3-right">×</span>\t\t\t    \t<div class="w3-dropdown-hover w3-cell typeSelection">\t\t\t\t\t\t  <input type="button" name=\'questionType\' class="w3-button w3-black questionType" value="'+s.single+'">\t\t\t\t\t\t  <div class="w3-dropdown-content w3-bar-block w3-border">\t\t\t\t\t\t    <li class="w3-bar-item w3-button" onclick="var qpid = $(this).parent().parent().parent().attr(\'id\'); selectType(qpid, \'single\');">單選</li>\t\t\t\t\t\t    <li class="w3-bar-item w3-button" onclick="var qpid = $(this).parent().parent().parent().attr(\'id\'); selectType(qpid, \'multiple\');">多選</li>\t\t\t\t\t\t    <li class="w3-bar-item w3-button" onclick="var qpid = $(this).parent().parent().parent().attr(\'id\'); selectType(qpid, \'text\');">簡答</li>\t\t\t\t\t\t    <li class="w3-bar-item w3-button" onclick="var qpid = $(this).parent().parent().parent().attr(\'id\'); selectType(qpid, \'textArea\');">詳答</li>\t\t\t\t\t\t    <li class="w3-bar-item w3-button" onclick="var qpid = $(this).parent().parent().parent().attr(\'id\'); selectType(qpid, \'file\');">檔案上傳</li>\t\t\t\t\t\t  </div>\t\t\t\t\t\t</div>\t\t\t\t\t  <h3 class="w3-cell"><input type="text" name="questionTitle" value="" placeholder="問題" onfocus="this.placeholder = \'\'" onblur="this.placeholder = \'問題\'" ></h3>\t\t\t\t\t  <div id="'+n+'">\t\t\t\t\t  \t<div id="'+o+'">\t\t\t\t\t  \t\t<p>\t\t\t\t\t  \t\t\t<div class="radio-icon"></div>\t\t\t\t\t  \t\t\t<input type="text" name="option" class="option" placeholder=" 選項 " onfocus="this.placeholder = \'\'" onblur="this.placeholder = \'選項\'" >\t\t\t\t\t  \t\t\t<span id="'+a+'" onclick="removeOption(id);" class="w3-bar-item w3-button w3-white w3-xlarge w3-right removeOpt">×</span>\t\t\t\t\t  \t\t</p>\t\t\t\t\t  \t</div>\t\t\t\t\t  \t<div id="'+r+'">\t\t\t\t\t  \t\t<p>\t\t\t\t\t  \t\t\t<div class="radio-icon"></div>\t\t\t\t\t  \t\t\t<button class="option" onclick="addOption(\''+l+'\',\'single\'); return false;">更多選項</button>\t\t\t\t\t  \t\t</p>\t\t\t\t\t  \t</div>\t\t\t\t\t  </div>\t\t\t\t\t  <div>\t\t\t\t\t  \t<p>\t\t\t\t\t  \t\t<input type="checkbox" id="required" name="required" class="w3-check">\t\t\t\t\t  \t\t<label>必填</label>\t\t\t\t\t  \t</p>\t\t\t\t\t  </div>\t\t\t\t\t</div>',multiple:'<div id="'+l+'" class="question-pannel multiple-choice">\t\t\t\t\t\t<span onclick="removeQuestion(\''+l+'\');" class="w3-bar-item w3-button w3-white w3-hover-opacity w3-hover-black w3-border w3-xlarge w3-right">×</span>\t\t\t    \t<div class="w3-dropdown-hover w3-cell typeSelection">\t\t\t\t\t\t\t<input type="button" name="questionType" class="w3-button w3-black questionType" value="'+s.multiple+'">\t\t\t\t\t\t  <div class="w3-dropdown-content w3-bar-block w3-border">\t\t\t\t\t\t    <li class="w3-bar-item w3-button" onclick="var qpid = $(this).parent().parent().parent().attr(\'id\'); selectType(qpid, \'single\');">單選</li>\t\t\t\t\t\t    <li class="w3-bar-item w3-button" onclick="var qpid = $(this).parent().parent().parent().attr(\'id\'); selectType(qpid, \'multiple\');">多選</li>\t\t\t\t\t\t    <li class="w3-bar-item w3-button" onclick="var qpid = $(this).parent().parent().parent().attr(\'id\'); selectType(qpid, \'text\');">簡答</li>\t\t\t\t\t\t    <li class="w3-bar-item w3-button" onclick="var qpid = $(this).parent().parent().parent().attr(\'id\'); selectType(qpid, \'textArea\');">詳答</li>\t\t\t\t\t\t    <li class="w3-bar-item w3-button" onclick="var qpid = $(this).parent().parent().parent().attr(\'id\'); selectType(qpid, \'file\');">檔案上傳</li>\t\t\t\t\t\t  </div>\t\t\t\t\t\t</div>\t\t\t\t\t  <h3 class="w3-cell"><input type="text" name="questionTitle" value="" placeholder="問題" onfocus="this.placeholder = \'\'" onblur="this.placeholder = \'問題\'" ></h3>\t\t\t\t\t  <div id="'+n+'">\t\t\t\t\t  \t<div id="'+o+'">\t\t\t\t\t  \t\t<p>\t\t\t\t\t  \t\t\t<div class="check-icon"></div>\t\t\t\t\t  \t\t\t<input type="text" name="option" class="option" placeholder=" 選項 " onfocus="this.placeholder = \'\'" onblur="this.placeholder = \'選項\'" >\t\t\t\t\t  \t\t\t<span id="'+a+'" onclick="removeOption(id);" class="w3-bar-item w3-button w3-white w3-xlarge w3-right removeOpt">×</span>\t\t\t\t\t  \t\t</p>\t\t\t\t\t  \t</div>\t\t\t\t\t  \t<div id="'+r+'">\t\t\t\t\t  \t\t<p>\t\t\t\t\t  \t\t\t<div class="check-icon"></div>\t\t\t\t\t  \t\t\t<button class="option" onclick="addOption(\''+l+'\', \'multiple\'); return false;">更多選項</button>\t\t\t\t\t  \t\t</p>\t\t\t\t\t  \t</div>\t\t\t\t\t  </div>\t\t\t\t\t  <div>\t\t\t\t\t  \t<p>\t\t\t\t\t  \t\t<input type="checkbox" name="required" class="w3-check">\t\t\t\t\t  \t\t<label>必填</label>\t\t\t\t\t  \t</p>\t\t\t\t\t  </div>\t\t\t\t\t</div>',text:'<div id="'+l+'" class="question-pannel text-answer">\t\t    \t\t<span onclick="removeQuestion(\''+l+'\');" class="w3-bar-item w3-button w3-white w3-hover-opacity w3-hover-black w3-border w3-xlarge w3-right">×</span>\t\t\t    \t<div class="w3-dropdown-hover w3-cell typeSelection">\t\t\t\t\t\t  <input type="button" name=\'questionType\' class="w3-button w3-black questionType" value="'+s.text+'">\t\t\t\t\t\t  <div class="w3-dropdown-content w3-bar-block w3-border">\t\t\t\t\t\t    <li class="w3-bar-item w3-button" onclick="var qpid = $(this).parent().parent().parent().attr(\'id\'); selectType(qpid, \'single\');">單選</li>\t\t\t\t\t\t    <li class="w3-bar-item w3-button" onclick="var qpid = $(this).parent().parent().parent().attr(\'id\'); selectType(qpid, \'multiple\');">多選</li>\t\t\t\t\t\t    <li class="w3-bar-item w3-button" onclick="var qpid = $(this).parent().parent().parent().attr(\'id\'); selectType(qpid, \'text\');">簡答</li>\t\t\t\t\t\t    <li class="w3-bar-item w3-button" onclick="var qpid = $(this).parent().parent().parent().attr(\'id\'); selectType(qpid, \'textArea\');">詳答</li>\t\t\t\t\t\t    <li class="w3-bar-item w3-button" onclick="var qpid = $(this).parent().parent().parent().attr(\'id\'); selectType(qpid, \'file\');">檔案上傳</li>\t\t\t\t\t\t  </div>\t\t\t\t\t\t</div>\t\t\t\t\t  <h3 class="w3-cell"><input type="text" name="questionTitle" value="" placeholder="問題" onfocus="this.placeholder = \'\'" onblur="this.placeholder = \'問題\'" ></h3>\t\t\t\t\t  <div id="'+n+'">\t\t\t\t\t  \t<div>\t\t\t\t\t  \t\t<p>\t\t\t\t\t  \t\t\t<div class="empty-icon"></div>\t\t\t\t\t  \t\t\t<input type="text" name="skip" class="w3-input option" placeholder=" 答案 " onfocus="this.placeholder = \'\'" onblur="this.placeholder = \'答案\'" disabled="disabled" >\t\t\t\t\t  \t\t</p>\t\t\t\t\t  \t</div>\t\t\t\t\t  </div>\t\t\t\t\t  <div>\t\t\t\t\t  \t<p>\t\t\t\t\t  \t\t<input type="checkbox" name="required" class="w3-check">\t\t\t\t\t  \t\t<label>必填</label>\t\t\t\t\t  \t</p>\t\t\t\t\t  </div>\t\t\t\t\t</div>',textArea:'<div id="'+l+'" class="question-pannel textarea-answer">\t\t    \t\t<span onclick="removeQuestion(\''+l+'\');" class="w3-bar-item w3-button w3-white w3-hover-opacity w3-hover-black w3-border w3-xlarge w3-right">×</span>\t\t\t    \t<div class="w3-dropdown-hover w3-cell typeSelection">\t\t\t\t\t\t  <input type="button" name=\'questionType\' class="w3-button w3-black questionType" value="'+s.textArea+'">\t\t\t\t\t\t  <div class="w3-dropdown-content w3-bar-block w3-border">\t\t\t\t\t\t    <li class="w3-bar-item w3-button" onclick="var qpid = $(this).parent().parent().parent().attr(\'id\'); selectType(qpid, \'single\');">單選</li>\t\t\t\t\t\t    <li class="w3-bar-item w3-button" onclick="var qpid = $(this).parent().parent().parent().attr(\'id\'); selectType(qpid, \'multiple\');">多選</li>\t\t\t\t\t\t    <li class="w3-bar-item w3-button" onclick="var qpid = $(this).parent().parent().parent().attr(\'id\'); selectType(qpid, \'text\');">簡答</li>\t\t\t\t\t\t    <li class="w3-bar-item w3-button" onclick="var qpid = $(this).parent().parent().parent().attr(\'id\'); selectType(qpid, \'textArea\');">詳答</li>\t\t\t\t\t\t    <li class="w3-bar-item w3-button" onclick="var qpid = $(this).parent().parent().parent().attr(\'id\'); selectType(qpid, \'file\');">檔案上傳</li>\t\t\t\t\t\t  </div>\t\t\t\t\t\t</div>\t\t\t\t\t  <h3 class="w3-cell"><input type="text" name="questionTitle" value="" placeholder="問題" onfocus="this.placeholder = \'\'" onblur="this.placeholder = \'問題\'" ></h3>\t\t\t\t\t  <div id="'+n+'">\t\t\t\t\t  \t<div>\t\t\t\t\t  \t\t<p>\t\t\t\t\t  \t\t\t<div class="empty-icon"></div><div class="textarea">答案</div>\t\t\t\t\t  \t\t</p>\t\t\t\t\t  \t</div>\t\t\t\t\t  </div>\t\t\t\t\t  <div>\t\t\t\t\t  \t<p>\t\t\t\t\t  \t\t<input type="checkbox" name="required" class="w3-check">\t\t\t\t\t  \t\t<label>必填</label>\t\t\t\t\t  \t</p>\t\t\t\t\t  </div>\t\t\t\t\t</div>',file:'<div id="'+l+'" class="question-pannel file-upload">\t\t    \t\t<span onclick="removeQuestion(\''+l+'\');" class="w3-bar-item w3-button w3-white w3-hover-opacity w3-hover-black w3-border w3-xlarge w3-right">×</span>\t\t\t    \t<div class="w3-dropdown-hover w3-cell typeSelection">\t\t\t\t\t\t  <input type="button" name=\'questionType\' class="w3-button w3-black questionType" value="'+s.file+'">\t\t\t\t\t\t  <div class="w3-dropdown-content w3-bar-block w3-border">\t\t\t\t\t\t    <li class="w3-bar-item w3-button" onclick="var qpid = $(this).parent().parent().parent().attr(\'id\'); selectType(qpid, \'single\');">單選</li>\t\t\t\t\t\t    <li class="w3-bar-item w3-button" onclick="var qpid = $(this).parent().parent().parent().attr(\'id\'); selectType(qpid, \'multiple\');">多選</li>\t\t\t\t\t\t    <li class="w3-bar-item w3-button" onclick="var qpid = $(this).parent().parent().parent().attr(\'id\'); selectType(qpid, \'text\');">簡答</li>\t\t\t\t\t\t    <li class="w3-bar-item w3-button" onclick="var qpid = $(this).parent().parent().parent().attr(\'id\'); selectType(qpid, \'textArea\');">詳答</li>\t\t\t\t\t\t    <li class="w3-bar-item w3-button" onclick="var qpid = $(this).parent().parent().parent().attr(\'id\'); selectType(qpid, \'file\');">檔案上傳</li>\t\t\t\t\t\t  </div>\t\t\t\t\t\t</div>\t\t\t\t\t  <h3 class="w3-cell"><input type="text" name="questionTitle" value="" placeholder="問題" onfocus="this.placeholder = \'\'" onblur="this.placeholder = \'問題\'" ></h3>\t\t\t\t\t  <div id="'+n+'">\t\t\t\t  \t\t<p>\t\t\t\t  \t\t\t<div class="empty-icon"></div>\t\t\t\t  \t\t\t<button class="upload">上傳檔案</button>\t\t\t\t  \t\t</p>\t\t\t\t\t  </div>\t\t\t\t\t  <div>\t\t\t\t\t  \t<p>\t\t\t\t\t  \t\t<input type="checkbox" name="required" class="w3-check">\t\t\t\t\t  \t\t<label>必填</label>\t\t\t\t\t  \t</p>\t\t\t\t\t  </div>\t\t\t\t\t</div>'};$(i).replaceWith(p[e])}function addOption(t,e){var i={single:"radio-icon",multiple:"check-icon"},l=t+"-answer",n=t+"-last",a=document.getElementById(l),o=document.getElementById(n),r=Math.random().toString(36).substr(2,5),s="optid"+r,p=document.createElement("div");p.id=s;var c='<p>\t\t\t\t\t\t<div class="'+i[e]+'"></div>\t\t\t\t\t\t<input type="text" name="option" class="option"  placeholder=" 選項 " onfocus="this.placeholder = \'\'" onblur="this.placeholder = \'選項\'" >\t\t\t\t\t\t<span id="'+r+'" onclick="removeOption(id);" class="w3-bar-item w3-button w3-white w3-xlarge w3-right removeOpt">×</span>\t\t\t\t\t</p>';p.innerHTML=c,a.insertBefore(p,o)}function removeOption(t){var e="#optid"+t;$(e).remove()}function addQuestion(t){var e=document.getElementById(t),i="qid"+Math.random().toString(36).substr(2,5),l=document.getElementById("form-edit"),n=document.createElement("div"),a={text:'<div id="'+i+'" class="question-pannel text-answer">\t\t    \t\t<span onclick="removeQuestion(\''+i+'\'); return false;" class="w3-bar-item w3-button w3-white w3-hover-opacity w3-hover-black w3-border w3-xlarge w3-right">×</span>\t\t\t    \t<div id="typeSelection" class="w3-dropdown-hover w3-cell typeSelection">\t\t\t\t\t\t\t<input type="button" name="questionType" class="w3-button w3-black questionType" value="簡答">\t\t\t\t\t\t  <div class="w3-dropdown-content w3-bar-block w3-border">\t\t\t\t\t\t    <li class="w3-bar-item w3-button" onclick="var qpid = $(this).parent().parent().parent().attr(\'id\'); selectType(qpid, \'single\');">單選</li>\t\t\t\t\t\t    <li class="w3-bar-item w3-button" onclick="var qpid = $(this).parent().parent().parent().attr(\'id\'); selectType(qpid, \'multiple\');">多選</li>\t\t\t\t\t\t    <li class="w3-bar-item w3-button" onclick="var qpid = $(this).parent().parent().parent().attr(\'id\'); selectType(qpid, \'text\');">簡答</li>\t\t\t\t\t\t    <li class="w3-bar-item w3-button" onclick="var qpid = $(this).parent().parent().parent().attr(\'id\'); selectType(qpid, \'textArea\');">詳答</li>\t\t\t\t\t\t    <li class="w3-bar-item w3-button" onclick="var qpid = $(this).parent().parent().parent().attr(\'id\'); selectType(qpid, \'file\');">檔案上傳</li>\t\t\t\t\t\t  </div>\t\t\t\t\t\t</div>\t\t\t\t\t  <h3 class="w3-cell">\t\t\t\t\t  \t<input type="text" name="questionTitle" class="questionTitle" value="" placeholder="問題" onfocus="this.placeholder = \'\'" onblur="this.placeholder = \'問題\'" >\t\t\t\t\t  </h3>\t\t\t\t\t  <div class="answer-text">\t\t\t\t\t  \t<div>\t\t\t\t\t  \t\t<p>\t\t\t\t\t  \t\t\t<div class="empty-icon"></div>\t\t\t\t\t  \t\t\t<input type="text" name="skip" class="w3-input option" placeholder=" 答案 " onfocus="this.placeholder = \'\'" onblur="this.placeholder = \'答案\'" disabled="disabled" >\t\t\t\t\t  \t\t</p>\t\t\t\t\t  \t</div>\t\t\t\t\t  </div>\t\t\t\t\t  <div>\t\t\t\t\t  \t<p>\t\t\t\t\t  \t\t<input type="checkbox" name="required" class="w3-check">\t\t\t\t\t  \t\t<label>必填</label>\t\t\t\t\t  \t</p>\t\t\t\t\t  </div>\t\t\t\t\t</div>'};n.innerHTML=a.text;var o=n.firstChild;l.insertBefore(o,e)}function removeQuestion(t){var e="#"+t;$(e).remove()}function createStudentForm(t){var e="/projects/"+t+"/student-form",i={},l="",n=[],a={},o=[],r={},s="",p={"單選":"single","多選":"multiple","簡答":"text","詳答":"textArea","檔案上傳":"file"};console.log("student form edit complete!"),document.querySelectorAll("#form-edit input").forEach(function(t){"title"==t.name?(l=t.value,i.title=l):"questionType"==t.name?(o=[],(a={}).questionType=p[t.value]):"questionTitle"==t.name?a.questionTitle=t.value:"option"==t.name?((r={}).option=t.value,o.push(r)):"required"==t.name?(a.subQuestions={},a.options=o,s=t.checked,a.require=s,n.push(a)):""==t.name&&console.log("err",t)}),i.title=l,i.questions=n,$.ajax({url:e,type:"post",data:{title:l,questions:JSON.stringify(n)},success:function(t,e,i){console.log("sucess"),location.reload()},error:function(t,e,i){console.log(i)}})}function updateStudentForm(t){var e="/projects/"+t+"/student-form",i={},l="",n=[],a={},o=[],r={},s="",p={"單選":"single","多選":"multiple","簡答":"text","詳答":"textArea","檔案上傳":"file"};document.querySelectorAll("#form-edit input").forEach(function(t){"title"==t.name?(l=t.value,i.title=l):"questionType"==t.name?(o=[],(a={}).questionType=p[t.value]):"questionTitle"==t.name?a.questionTitle=t.value:"option"==t.name?(console.log(t.value),r={option:t.value},console.log(r),o.push(r),console.log(o)):"required"==t.name?(a.subQuestions={},a.options=o,s=t.checked,a.require=s,n.push(a)):""==t.name&&console.log("err",t)}),console.log(n),console.log("title",l),console.log("json",JSON.stringify(n)),$.ajax({url:e,type:"put",data:{title:l,questions:JSON.stringify(n)},success:function(t,e,i){console.log("sucess"),location.reload()},error:function(t,e,i){console.log(i)}})}function createRmdForm(t){console.log("rmdFormCreate",t);var e="/projects/"+t+"/rmdletter-form",i={},l="",n=[],a={},o=[],r={},s="",p={"單選":"single","多選":"multiple","簡答":"text","詳答":"textArea","檔案上傳":"file"};document.querySelectorAll("#form-edit input").forEach(function(t){console.log(t.name,t.value),"title"==t.name?(l=t.value,i.title=l):"questionType"==t.name?(o=[],(a={}).questionType=p[t.value]):"questionTitle"==t.name?(console.log(t.name,t.value),a.questionTitle=t.value):"option"==t.name?((r={}).option=t.value,o.push(r)):"required"==t.name?(a.options=o,s=t.checked,a.require=s,n.push(a)):""==t.name&&console.log("err",t)}),i.title=l,i.questions=n,console.log("data",i),console.log("jsondata",JSON.stringify(i)),$.ajax({url:e,type:"post",data:{title:l,questions:JSON.stringify(n)},success:function(t,e,i){console.log("sucess"),location.reload()},error:function(t,e,i){console.log(i)}})}function updateRmdForm(t){console.log("rmdFormUpdate",t);var e="/projects/"+t+"/rmdletter-form";console.log(e);var i={},l="",n=[],a={},o=[],r={},s="",p={"單選":"single","多選":"multiple","簡答":"text","詳答":"textArea","檔案上傳":"file"};document.querySelectorAll("#form-edit input").forEach(function(t){console.log(t.name,t.value),"title"==t.name?(l=t.value,i.title=l):"questionType"==t.name?(o=[],(a={}).questionType=p[t.value]):"questionTitle"==t.name?(console.log(t.name,t.value),a.questionTitle=t.value):"option"==t.name?((r={}).option=t.value,o.push(r)):"required"==t.name?(a.options=o,s=t.checked,a.require=s,n.push(a)):""==t.name&&console.log("err",t)}),$.ajax({url:e,type:"put",data:{title:l,questions:JSON.stringify(n)},success:function(t,e,i){console.log("sucess"),location.reload()},error:function(t,e,i){console.log(i)}})}